The solution below tweaks the baseline solution to try to store the revoke functions in a WeakMap. This is an attempt to solve a problem we observed where the revoke functions maintain a reference to the proxy, which (before it is revoked) maintains a reference to the (real) target. This would cause _anything_ accessed through the membrane to be retained (until it is revoked) when it would otherwise be garbage collected.